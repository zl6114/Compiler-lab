zl6114 : Cloning repo
Cloning into 'zl6114'...
zl6114 : Fetching repo
zl6114 : Checking out branch soft-2017-02-27 if it exists...
error: pathspec 'soft-2017-02-27' did not match any file(s) known to git.
zl6114 : Checking out specified hash and creating new branch soft-2017-02-27
Switched to a new branch 'soft-2017-02-27'
Already on 'soft-2017-02-27'
zl6114 : Checking we're on branch soft-2017-02-27
cd ${REPOS}/$U && git rev-parse --abbrev-ref HEAD
zl6114 : Checking we're on the right hash 0315bef2097ea05246f716834aa0946851ef1038...
cd ${REPOS}/$U && git rev-parse $RUN
Note that each submission has not been looked at manually, they
have only been randomly sampled to get an idea if the test automation.
is working for most submission. If the build system appears
to be broken, please raise an issue (though stability of these
runs is not a huge priority).


do_or_die "Overwriting test_interpreter.sh with one from spec." \
    cp $SCRATCH/spec/3-codegen/test_interpreter.sh $REPO/3-codegen/test_interpreter.sh
zl6114 : Overwriting test_interpreter.sh with one from spec.

do_or_die "Overwriting test_compiler.sh with one from spec." \
    cp $SCRATCH/spec/3-codegen/test_compiler.sh $REPO/3-codegen/test_compiler.sh
zl6114 : Overwriting test_compiler.sh with one from spec.

do_or_die "Ensuring test_parser.sh is executable." \
    chmod u+x $REPO/3-codegen/*.sh
zl6114 : Ensuring test_parser.sh is executable.


log_msg "########################################################"
zl6114 : ########################################################
log_msg "## Part 1"
zl6114 : ## Part 1

log_msg "Part 1 : Running test"
zl6114 : Part 1 : Running test
(cd $REPO/3-codegen && ./test_interpreter.sh)
/usr/bin/dos2unix
========================================
 Cleaning the temporaries and outputs
rm bin/*
rm: cannot remove 'bin/*': No such file or directory
makefile:20: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)
rm src/*.o
rm: cannot remove 'src/*.o': No such file or directory
makefile:20: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)
rm working/*/*.txt
rm: cannot remove 'working/*/*.txt': No such file or directory
makefile:20: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)
========================================
 Force building interpreter
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_parse.o src/ast_parse.cpp
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_pretty_print.o src/ast_pretty_print.cpp
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_interpret.o src/ast_interpret.cpp
g++  -std=c++11 -w -Wall -g -I include -o bin/interpreter src/interpreter.cpp src/ast_parse.o src/ast_pretty_print.o src/ast_interpret.o  
/usr/bin/ld: cannot open output file bin/interpreter: No such file or directory
collect2: error: ld returned 1 exit status
makefile:5: recipe for target 'bin/interpreter' failed
make: *** [bin/interpreter] Error 1
Error while building interpret.

log_msg "########################################################"
zl6114 : ########################################################
log_msg "## Part 2"
zl6114 : ## Part 2

log_msg "Part 1 : Running test"
zl6114 : Part 1 : Running test
(cd $REPO/3-codegen && ./test_compiler.sh)
/usr/bin/dos2unix
========================================
 Cleaning the temporaries and outputs
rm bin/*
rm: cannot remove 'bin/*': No such file or directory
makefile:20: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)
rm src/*.o
rm working/*/*.txt
rm: cannot remove 'working/*/*.txt': No such file or directory
makefile:20: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)
 Force building vm (just in case)
g++  -std=c++11 -w -Wall -g -I include -o bin/vm src/vm.cpp  
/usr/bin/ld: cannot open output file bin/vm: No such file or directory
collect2: error: ld returned 1 exit status
makefile:5: recipe for target 'bin/vm' failed
make: *** [bin/vm] Error 1
Error while building vm.

log_msg "Part 1&2 : Capturing outputs"
zl6114 : Part 1&2 : Capturing outputs
(cd $REPO/3-codegen && tar -czf $LOGDIR/3-codegen.tar.gz working )


log_msg "########################################################"
zl6114 : ########################################################
log_msg "## Part 3"
zl6114 : ## Part 3



log_msg "Part 3 : Attempting to build bin/constant_fold"
zl6114 : Part 3 : Attempting to build bin/constant_fold
(cd $REPO/3-codegen && make -B bin/constant_fold)
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_parse.o src/ast_parse.cpp
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_pretty_print.o src/ast_pretty_print.cpp
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_constant_fold.o src/ast_constant_fold.cpp
g++  -std=c++11 -w -Wall -g -I include -o bin/constant_fold src/constant_fold.cpp src/ast_parse.o src/ast_pretty_print.o src/ast_constant_fold.o  
/usr/bin/ld: cannot open output file bin/constant_fold: No such file or directory
collect2: error: ld returned 1 exit status
makefile:5: recipe for target 'bin/constant_fold' failed
make: *** [bin/constant_fold] Error 1

if [[ -f $REPO/3-codegen/bin/constant_fold ]]; then
    log_msg "Part 3 : Putting value through..."
    (cd $REPO/3-codegen && echo "Sub [ x Add [ 4 5 ] ]" | bin/constant_fold | head -c 10000 )
else
    log_msg "Part 3 : No binary built"
fi
zl6114 : Part 3 : No binary built


log_msg "Part 3 : Attempting to build bin/dead_branch_removal"
zl6114 : Part 3 : Attempting to build bin/dead_branch_removal
(cd $REPO/3-codegen && make -B bin/dead_branch_removal)
make: *** No rule to make target 'bin/dead_branch_removal'.  Stop.

if [[ -f $REPO/3-codegen/bin/dead_branch_removal ]]; then
    log_msg "Part 3 : Putting value through..."
    (cd $REPO/3-codegen && echo "Seq [ Assign : y [ 5 ] If [ 0 Assign : x [ 10 ] Assign : x [ 11 ] ] ]" | bin/dead_branch_removal | head -c 10000 )
else
    log_msg "Part 3 : No binary built"
fi
zl6114 : Part 3 : No binary built


log_msg "Part 3 : Attempting to build bin/constant_propagation"
zl6114 : Part 3 : Attempting to build bin/constant_propagation
(cd $REPO/3-codegen && make -B bin/constant_propagation)
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_parse.o src/ast_parse.cpp
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_pretty_print.o src/ast_pretty_print.cpp
g++ -std=c++11 -w -Wall -g -I include   -c -o src/ast_constant_propagation.o src/ast_constant_propagation.cpp
g++  -std=c++11 -w -Wall -g -I include -o bin/constant_propagation src/constant_propagation.cpp src/ast_parse.o src/ast_pretty_print.o src/ast_constant_propagation.o  
/usr/bin/ld: cannot open output file bin/constant_propagation: No such file or directory
collect2: error: ld returned 1 exit status
makefile:5: recipe for target 'bin/constant_propagation' failed
make: *** [bin/constant_propagation] Error 1

if [[ -f $REPO/3-codegen/bin/constant_propagation ]]; then
    log_msg "Part 3 : Putting value through..."
    (cd $REPO/3-codegen && echo "Seq [ Assign : x [ 5 ] Assign : y [ x ] Assign : x [ wibble ] Assign : z [ Add [ x 2 ] ] ]" | bin/constant_propagation | head -c 10000 )
else
    log_msg "Part 3 : No binary built"
fi
zl6114 : Part 3 : No binary built


log_msg "########################################################"
zl6114 : ########################################################
log_msg "## Part 4"
zl6114 : ## Part 4


log_msg "Part 3 : Attempting to build generate_mips"
zl6114 : Part 3 : Attempting to build generate_mips
(cd $REPO/3-codegen && make -B bin/generate_mips)
make: *** No rule to make target 'bin/generate_mips'.  Stop.

if [[ -f $REPO/3-codegen/bin/generate_mips ]]; then
    log_msg "Part 3 : Single check."
    (cd $REPO/3-codegen && bin/generate_mips test/programs/constant_5/in.code.txt my_executable | head -c 1000000 )

    if [[ -f $REPO/3-codegen/my_executable ]]; then
        log_msg "What is it?"
        file "$REPO/3-codegen/my_executable"

        log_msg "Part 3 : Trying to run it."
        $REPO/3-codegen/my_executable

        echo $?
    fi
else
    log_msg "Part 3 : No binary built"
fi
zl6114 : Part 3 : No binary built

zl6114 : Test Complete
